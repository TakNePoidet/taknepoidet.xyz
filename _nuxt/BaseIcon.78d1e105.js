import{n as E,aa as C,D as j,ab as A,a4 as M,X as D,Y as B,a7 as T,ac as q,ad as V,G,f as H,h as N,g as $,m as J,a5 as X,o as z,c as x,F as Y,r as Q,j as p,a as W,i as Z,l as K,z as k,E as ee,L as te}from"./entry.e3657dab.js";import{_ as F}from"./_plugin-vue_export-helper.c27b6911.js";function S(t){return t!==null&&typeof t=="object"}function L(t,e,s=".",r){if(!S(e))return L(t,{},s,r);const o=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const n=t[i];n!=null&&(r&&r(o,i,n,s)||(Array.isArray(n)&&Array.isArray(o[i])?o[i]=[...n,...o[i]]:S(n)&&S(o[i])?o[i]=L(n,o[i],(s?`${s}.`:"")+i.toString(),r):o[i]=n))}return o}function se(t){return(...e)=>e.reduce((s,r)=>L(s,r,"",t),{})}const R=se();function re(t){function e(){return`${t}`}function s(n){return`${e()}-${n}`}function r(n){return`${e()}__${n}`}function o(n){return`${e()}--${n}`}function i(n,c){return c?`${e()}--is-${n}`:""}return{base:e,component:r,modifier:o,is:i,block:s}}function ie(t,e={}){const s=E(!1),{stop:r,isSupported:o}=C(t,([{isIntersecting:i}])=>{e.once===!0?i&&(s.value=i):s.value=i});return o||(s.value=!0),j(s,()=>{s.value===!0&&e.once&&r()}),A(s)}function ne(t){const e=E(t);function s(r){e.value=r}return[e,s]}async function oe(t,e){return await ae(e).catch(r=>(console.error("Failed to get image meta for "+e,r+""),{width:0,height:0,ratio:0}))}async function ae(t){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((e,s)=>{const r=new Image;r.onload=()=>{const o={width:r.width,height:r.height,ratio:r.width/r.height};e(o)},r.onerror=o=>s(o),r.src=t})}function P(t){return e=>e?t[e]||e:t.missingValue}function ce({formatter:t,keyMap:e,joinWith:s="/",valueMap:r}={}){t||(t=(i,n)=>`${i}=${n}`),e&&typeof e!="function"&&(e=P(e));const o=r||{};return Object.keys(o).forEach(i=>{typeof o[i]!="function"&&(o[i]=P(o[i]))}),(i={})=>Object.entries(i).filter(([c,u])=>typeof u<"u").map(([c,u])=>{const d=o[c];return typeof d=="function"&&(u=d(i[c])),c=typeof e=="function"?e(c):c,t(c,u)}).join(s)}function b(t=""){if(typeof t=="number")return t;if(typeof t=="string"&&t.replace("px","").match(/^\d+$/g))return parseInt(t,10)}function ue(t){const e={options:t},s=(o,i={})=>O(e,o,i),r=(o,i={},n={})=>s(o,{...n,modifiers:R(i,n.modifiers||{})}).url;for(const o in t.presets)r[o]=(i,n,c)=>r(i,n,{...t.presets[o],...c});return r.options=t,r.getImage=s,r.getMeta=(o,i)=>fe(e,o,i),r.getSizes=(o,i)=>ge(e,o,i),e.$img=r,r}async function fe(t,e,s){const r=O(t,e,{...s});return typeof r.getMeta=="function"?await r.getMeta():await oe(t,r.url)}function O(t,e,s){var d,g;if(typeof e!="string"||e==="")throw new TypeError(`input must be a string (received ${typeof e}: ${JSON.stringify(e)})`);if(e.startsWith("data:"))return{url:e};const{provider:r,defaults:o}=de(t,s.provider||t.options.provider),i=le(t,s.preset);if(e=M(e)?e:D(e),!r.supportsAlias)for(const a in t.options.alias)e.startsWith(a)&&(e=B(t.options.alias[a],e.substr(a.length)));if(r.validateDomains&&M(e)){const a=T(e).host;if(!t.options.domains.find(f=>f===a))return{url:e}}const n=R(s,i,o);n.modifiers={...n.modifiers};const c=n.modifiers.format;(d=n.modifiers)!=null&&d.width&&(n.modifiers.width=b(n.modifiers.width)),(g=n.modifiers)!=null&&g.height&&(n.modifiers.height=b(n.modifiers.height));const u=r.getImage(e,n,t);return u.format=u.format||c||"",u}function de(t,e){const s=t.options.providers[e];if(!s)throw new Error("Unknown provider: "+e);return s}function le(t,e){if(!e)return{};if(!t.options.presets[e])throw new Error("Unknown preset: "+e);return t.options.presets[e]}function ge(t,e,s){var d,g;const r=b((d=s.modifiers)==null?void 0:d.width),o=b((g=s.modifiers)==null?void 0:g.height),i=r&&o?o/r:0,n=[],c={};if(typeof s.sizes=="string")for(const a of s.sizes.split(/[\s,]+/).filter(f=>f)){const f=a.split(":");f.length===2&&(c[f[0].trim()]=f[1].trim())}else Object.assign(c,s.sizes);for(const a in c){const f=t.options.screens&&t.options.screens[a]||parseInt(a);let l=String(c[a]);const v=l.endsWith("vw");if(!v&&/^\d+$/.test(l)&&(l=l+"px"),!v&&!l.endsWith("px"))continue;let m=parseInt(l);if(!f||!m)continue;v&&(m=Math.round(m/100*f));const _=i?Math.round(m*i):o;n.push({width:m,size:l,screenMaxWidth:f,media:`(max-width: ${f}px)`,src:t.$img(e,{...s.modifiers,width:m,height:_},s)})}n.sort((a,f)=>a.screenMaxWidth-f.screenMaxWidth);const u=n[n.length-1];return u&&(u.media=""),{sizes:n.map(a=>`${a.media?a.media+" ":""}${a.size}`).join(", "),srcset:n.map(a=>`${a.src} ${a.width}w`).join(", "),src:u==null?void 0:u.src}}const me=ce({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(t,e)=>q(t)+"_"+q(e)}),he=(t,{modifiers:e={},baseURL:s}={},r)=>{e.width&&e.height&&(e.resize=`${e.width}x${e.height}`,delete e.width,delete e.height);const o=me(e)||"_";return s||(s=B(r.options.nuxt.baseURL,"/_ipx")),{url:B(s,o,V(t))}},pe=!0,_e=!0,we=Object.freeze(Object.defineProperty({__proto__:null,getImage:he,supportsAlias:_e,validateDomains:pe},Symbol.toStringTag,{value:"Module"})),U={screens:{xs:320,sm:640,md:768,lg:1024,xl:1280,xxl:1536,"2xl":1536},presets:{},provider:"ipx",domains:[],alias:{}};U.providers={ipx:{provider:we,defaults:void 0}};const ve=()=>{const t=G(),e=H();return e.$img||e._img||(e._img=ue({...U,nuxt:{baseURL:t.app.baseURL}}))};function ye(){return ve()}const $e=["srcset","type","sizes"],ze=["src","width","height","alt","data-loading","loading"],xe=N({__name:"BasePicture",props:{src:{type:String,required:!0},width:{type:Number,required:!0,default(){throw new Error("Не указана ширина изображения")}},height:{type:[Number,String],required:!0,default(){throw new Error("Не указана высота изображения")}},alt:{type:String,required:!0,default(){throw new Error("Не указано описание изображения")}},preload:{type:Boolean,required:!1,default:!1}},setup(t){const e=t;function s(_){return _.split(/[?#]/).shift().split("/").pop().split(".").pop()}const r=re("picture"),o=$(()=>s(e.src)),i=$(()=>o.value==="svg"?"svg":"webp");function n(){a.value&&g(!1)}const c=ye(),u=J("$element"),[d,g]=ne(!0);let a;e.preload?(a=A(E(!0)),g(!1)):a=ie(u,{once:!0});const f=$(()=>c(e.src,{quality:1,width:100,height:100,fit:"cover",format:"webp"})),l=$(()=>i.value==="svg"?[{srcset:e.src}]:[i.value].map(h=>{const{srcset:y,sizes:w,src:I}=c.getSizes(e.src,{sizes:c.options.screens,modifiers:{quality:90,format:h}});return{srcset:y,sizes:w,src:I}})),v=$(()=>{const _=l.value[1]?1:0,h=l.value[_],y=h==null?void 0:h.sizes,w=h==null?void 0:h.srcset;return{imagesizes:y,imagesrcset:w}});function m(){ee(()=>{a.value&&u.value&&u.value.complete&&g(!1)})}return j(()=>e.src,()=>{g(!0)}),X(()=>{m()}),j(a,()=>{m()}),(_,h)=>{const y=te;return z(),x("picture",{class:k([p(r).base(),p(r).is("loading",p(d))])},[(z(!0),x(Y,null,Q(p(l),(w,I)=>(z(),x("source",{key:I,srcset:w.srcset,type:w.type,sizes:p(a)?w.sizes:void 0},null,8,$e))),128)),W("img",{ref_key:"$element",ref:u,src:p(f),width:t.width,height:t.height,alt:t.alt,"data-loading":p(d),loading:t.preload?"eager":"lazy",onLoad:n},null,40,ze),t.preload?(z(),Z(y,{key:0,rel:"preload",as:"image",imagesizes:p(v).imagesizes,imagesrcset:p(v).imagesrcset},null,8,["imagesizes","imagesrcset"])):K("",!0)],2)}}});const Be=F(xe,[["__scopeId","data-v-1306c692"]]),be=["xlink:href"],Ie=N({__name:"BaseIcon",props:{name:{type:String,required:!0}},setup(t){return(e,s)=>(z(),x("svg",{viewBox:"0 0 32 32",class:k(`icon icon--${t.name}`)},[W("use",{"xlink:href":`/images/sprites.svg#${t.name}`},null,8,be)],2))}});const Le=F(Ie,[["__scopeId","data-v-99fe3d8a"]]);export{Be as B,Le as a,re as b,R as d,ne as u};
