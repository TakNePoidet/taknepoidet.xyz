import{h as N,g as v,l as m,o as S,i as T,n as F,X as U,j as R,y as E,Y as V,I as j,Z as B,$ as L,a0 as G,a1 as M,a2 as J,a3 as O,a4 as Q,a5 as X,f as Y,Q as Z,G as K,c as I,F as ee,q as te,a as ie,C as ne,L as re}from"./entry.3e81aa5b.js";function W(t){return t!==null&&typeof t=="object"}function q(t,e,n=".",i){if(!W(e))return q(t,{},n,i);const r=Object.assign({},e);for(const s in t){if(s==="__proto__"||s==="constructor")continue;const o=t[s];o!=null&&(i&&i(r,s,o,n)||(Array.isArray(o)&&Array.isArray(r[s])?r[s]=[...o,...r[s]]:W(o)&&W(r[s])?r[s]=q(o,r[s],(n?`${n}.`:"")+s.toString(),i):r[s]=o))}return r}function se(t){return(...e)=>e.reduce((n,i)=>q(n,i,"",t),{})}const C=se();function oe(t){function e(){return`${t}`}function n(o){return`${e()}-${o}`}function i(o){return`${e()}__${o}`}function r(o){return`${e()}--${o}`}function s(o,a){return a?`${e()}--is-${o}`:""}return{base:e,component:i,modifier:r,is:s,block:n}}const Ee=N({__name:"TheIcon",props:{icon:{type:Object,required:!0}},setup(t){const e=t,n=v(()=>{var i;return((i=e.icon)==null?void 0:i.name)??void 0});return(i,r)=>m(n)?(S(),T(U(t.icon),{key:0,class:F(["icon","icon--"+m(n)])},null,8,["class"])):R("",!0)}});function ae(t,e={}){const n=E(!1),{stop:i,isSupported:r}=V(t,([{isIntersecting:s}])=>{e.once===!0?s&&(n.value=s):n.value=s});return r||(n.value=!0),j(n,()=>{n.value===!0&&e.once&&i()}),B(n)}function ce(t){const e=E(t);function n(i){e.value=i}return[e,n]}async function ue(t,e){return await fe(e).catch(i=>(console.error("Failed to get image meta for "+e,i+""),{width:0,height:0,ratio:0}))}async function fe(t){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((e,n)=>{const i=new Image;i.onload=()=>{const r={width:i.width,height:i.height,ratio:i.width/i.height};e(r)},i.onerror=r=>n(r),i.src=t})}function P(t){return e=>e?t[e]||e:t.missingValue}function de({formatter:t,keyMap:e,joinWith:n="/",valueMap:i}={}){t||(t=(s,o)=>`${s}=${o}`),e&&typeof e!="function"&&(e=P(e));const r=i||{};return Object.keys(r).forEach(s=>{typeof r[s]!="function"&&(r[s]=P(r[s]))}),(s={})=>Object.entries(s).filter(([a,c])=>typeof c<"u").map(([a,c])=>{const f=r[a];return typeof f=="function"&&(c=f(s[a])),a=typeof e=="function"?e(a):a,t(a,c)}).join(n)}function z(t=""){if(typeof t=="number")return t;if(typeof t=="string"&&t.replace("px","").match(/^\d+$/g))return parseInt(t,10)}function le(t=""){if(t===void 0||!t.length)return[];const e=t.split(" ").map(n=>parseInt(n.replace("x","")));return e.filter((n,i)=>e.indexOf(n)===i)}function he(t){const e={};if(typeof t=="string")for(const n of t.split(/[\s,]+/).filter(i=>i)){const i=n.split(":");i.length!==2?e[i[0].trim()]=i[0].trim():e[i[0].trim()]=i[1].trim()}else Object.assign(e,t);return e}function ge(t){const e={options:t},n=(r,s={})=>D(e,r,s),i=(r,s={},o={})=>n(r,{...o,modifiers:C(s,o.modifiers||{})}).url;for(const r in t.presets)i[r]=(s,o,a)=>i(s,o,{...t.presets[r],...a});return i.options=t,i.getImage=n,i.getMeta=(r,s)=>me(e,r,s),i.getSizes=(r,s)=>_e(e,r,s),e.$img=i,i}async function me(t,e,n){const i=D(t,e,{...n});return typeof i.getMeta=="function"?await i.getMeta():await ue(t,i.url)}function D(t,e,n){var f,g;if(typeof e!="string"||e==="")throw new TypeError(`input must be a string (received ${typeof e}: ${JSON.stringify(e)})`);if(e.startsWith("data:"))return{url:e};const{provider:i,defaults:r}=pe(t,n.provider||t.options.provider),s=we(t,n.preset);if(e=L(e)?e:G(e),!i.supportsAlias)for(const d in t.options.alias)e.startsWith(d)&&(e=M(t.options.alias[d],e.substr(d.length)));if(i.validateDomains&&L(e)){const d=J(e).host;if(!t.options.domains.find(y=>y===d))return{url:e}}const o=C(n,s,r);o.modifiers={...o.modifiers};const a=o.modifiers.format;(f=o.modifiers)!=null&&f.width&&(o.modifiers.width=z(o.modifiers.width)),(g=o.modifiers)!=null&&g.height&&(o.modifiers.height=z(o.modifiers.height));const c=i.getImage(e,o,t);return c.format=c.format||a||"",c}function pe(t,e){const n=t.options.providers[e];if(!n)throw new Error("Unknown provider: "+e);return n}function we(t,e){if(!e)return{};if(!t.options.presets[e])throw new Error("Unknown preset: "+e);return t.options.presets[e]}function _e(t,e,n){var b,x,p,h,w;const i=z((b=n.modifiers)==null?void 0:b.width),r=z((x=n.modifiers)==null?void 0:x.height),s=he(n.sizes),o=(p=n.densities)!=null&&p.trim()?le(n.densities.trim()):t.options.densities;if(o.length===0)throw new Error("'densities' must not be empty, configure to '1' to render regular size only (DPR 1.0)");const a=i&&r?r/i:0,c=[],f=[];if(Object.keys(s).length>1){for(const u in s){const l=k(u,String(s[u]),r,a,t);if(l!==void 0){c.push({size:l.size,screenMaxWidth:l.screenMaxWidth,media:`(max-width: ${l.screenMaxWidth}px)`});for(const _ of o)f.push({width:l._cWidth*_,src:A(t,e,n,l,_)})}}ve(c)}else for(const u of o){const l=Object.keys(s)[0];let _=k(l,String(s[l]),r,a,t);_===void 0&&(_={size:"",screenMaxWidth:0,_cWidth:(h=n.modifiers)==null?void 0:h.width,_cHeight:(w=n.modifiers)==null?void 0:w.height}),f.push({width:u,src:A(t,e,n,_,u)})}ye(f);const g=f[f.length-1],d=c.length?c.map(u=>`${u.media?u.media+" ":""}${u.size}`).join(", "):void 0,y=d?"w":"x",$=f.map(u=>`${u.src} ${u.width}${y}`).join(", ");return{sizes:d,srcset:$,src:g==null?void 0:g.src}}function k(t,e,n,i,r){const s=r.options.screens&&r.options.screens[t]||parseInt(t),o=e.endsWith("vw");if(!o&&/^\d+$/.test(e)&&(e=e+"px"),!o&&!e.endsWith("px"))return;let a=parseInt(e);if(!s||!a)return;o&&(a=Math.round(a/100*s));const c=i?Math.round(a*i):n;return{size:e,screenMaxWidth:s,_cWidth:a,_cHeight:c}}function A(t,e,n,i,r){return t.$img(e,{...n.modifiers,width:i._cWidth?i._cWidth*r:void 0,height:i._cHeight?i._cHeight*r:void 0},n)}function ve(t){t.sort((n,i)=>n.screenMaxWidth-i.screenMaxWidth),t[t.length-1]&&(t[t.length-1].media="");let e=null;for(let n=t.length-1;n>=0;n--){const i=t[n];i.media===e&&t.splice(n,1),e=i.media}}function ye(t){t.sort((n,i)=>n.width-i.width);let e=null;for(let n=t.length-1;n>=0;n--){const i=t[n];i.width===e&&t.splice(n,1),e=i.width}}const $e=de({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(t,e)=>O(t)+"_"+O(e)}),be=(t,{modifiers:e={},baseURL:n}={},i)=>{e.width&&e.height&&(e.resize=`${e.width}x${e.height}`,delete e.width,delete e.height);const r=$e(e)||"_";return n||(n=M(i.options.nuxt.baseURL,"/_ipx")),{url:M(n,r,Q(t))}},xe=!0,Se=!0,ze=Object.freeze(Object.defineProperty({__proto__:null,getImage:be,supportsAlias:Se,validateDomains:xe},Symbol.toStringTag,{value:"Module"})),H={screens:{xs:320,sm:640,md:768,lg:1024,xl:1280,xxl:1536,"2xl":1536},presets:{},provider:"ipx",domains:[],alias:{},densities:[1,2],format:["webp"]};H.providers={ipx:{provider:ze,defaults:void 0}};const Ie=()=>{const t=X(),e=Y();return e.$img||e._img||(e._img=ge({...H,nuxt:{baseURL:t.app.baseURL}}))};function We(){return Ie()}const je=["srcset","type","sizes"],Me=["src","width","height","alt","data-loading","loading"],Le=N({__name:"ThePicture",props:{src:{type:String,required:!0},width:{type:Number,required:!0,default(){throw new Error("Не указана ширина изображения")}},height:{type:[Number,String],required:!0,default(){throw new Error("Не указана высота изображения")}},alt:{type:String,required:!0,default(){throw new Error("Не указано описание изображения")}},preload:{type:Boolean,required:!1,default:!1}},setup(t){const e=t;function n(p){return p.split(/[?#]/).shift().split("/").pop().split(".").pop()}const i=oe("picture"),r=v(()=>n(e.src)),s=v(()=>r.value==="svg"?"svg":"webp");function o(){d.value&&g(!1)}const a=We(),c=Z("$element"),[f,g]=ce(!0);let d;e.preload?(d=B(E(!0)),g(!1)):d=ae(c,{once:!0});const y=v(()=>a(e.src,{quality:1,width:100,height:100,fit:"cover",format:"webp"})),$=v(()=>s.value==="svg"?[{srcset:e.src}]:[s.value].map(h=>{const{srcset:w,sizes:u,src:l}=a.getSizes(e.src,{sizes:a.options.screens,modifiers:{quality:90,format:h}});return{srcset:w,sizes:u,src:l}})),b=v(()=>{const p=$.value[1]?1:0,h=$.value[p],w=h==null?void 0:h.sizes,u=h==null?void 0:h.srcset;return{imagesizes:w,imagesrcset:u}});function x(){ne(()=>{d.value&&c.value&&c.value.complete&&g(!1)})}return j(()=>e.src,()=>{g(!0)}),K(()=>{x()}),j(d,()=>{x()}),(p,h)=>{const w=re;return S(),I("picture",{class:F([m(i).base(),m(i).is("loading",m(f))])},[(S(!0),I(ee,null,te(m($),(u,l)=>(S(),I("source",{key:l,srcset:u.srcset,type:u.type,sizes:m(d)?u.sizes:void 0},null,8,je))),128)),ie("img",{ref_key:"$element",ref:c,src:m(y),width:t.width,height:t.height,alt:t.alt,"data-loading":m(f),loading:t.preload?"eager":"lazy",onLoad:o},null,40,Me),t.preload?(S(),T(w,{key:0,rel:"preload",as:"image",imagesizes:m(b).imagesizes,imagesrcset:m(b).imagesrcset},null,8,["imagesizes","imagesrcset"])):R("",!0)],2)}}});export{Ee as _,Le as a,ce as b,C as d,oe as u};
